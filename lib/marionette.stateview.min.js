// Marionette.StateView
// --------------------
// v0.1.0
// 
// Copyright (c) 2014 Mattias Rydengren <mattias.rydengren@coderesque.com>
// Distributed under MIT license


Marionette.StateView=function(a,b,c){"use strict";function d(a,b){if(!a)throw new Error(b);return a}return a.View.extend({initialize:function(){this.currentViewKey=d(this.initialView,"Missing `initialView`"),d(this.views,"Missing `views`"),this.listenTo(this,"show",this._onShowCalled)},render:function(){return this._transition(this.currentViewKey),this.triggerMethod("render",this),this},createView:function(a){return new a({model:this.model,collection:this.collection})},close:function(){this._closeView(),a.View.prototype.close.call(this)},_closeView:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),delete this.currentView)},_listen:function(a){var b=this;c.each(this.views,function(c,d){a.on(d,function(){b._transition(d)})})},_openView:function(a){this.$el.empty().append(a.el)},_onShowCalled:function(){this._isShown||a.triggerMethod.call(this.currentView,"show")},_showView:function(b){var d=b.isClosed||c.isUndefined(b.$el),e=b!==this.currentView;e&&this._closeView(),b.render(),(e||d)&&this._openView(b),this._isShown&&a.triggerMethod.call(b,"show"),this.currentView=b},_transition:function(a){var b=d(this.views[a],'Missing `ViewType` for "'+a+'"');this.currentViewKey=a;var c=this.createView(b);this._listen(c),this._showView(c)}})}(Marionette,Backbone,_);
//# sourceMappingURL=marionette.stateview.min.map